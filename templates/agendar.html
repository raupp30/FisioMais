{% extends 'painel_paciente.html' %}

{% block title %}Agendamentos{% endblock %}

{% block content %}
<div class="max-w-xl mx-auto mt-10 bg-white shadow-lg rounded-2xl p-8">
  <h1 class="text-3xl font-bold text-center text-gray-800 mb-8">ðŸ“… Agendar Consulta</h1>

  <form method="POST" action="{{ url_for('agendar') }}" class="space-y-6">

    <div>
      <label for="fisioterapeuta" class="block text-gray-700 font-semibold mb-1">Selecione um fisioterapeuta:</label>
      {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="mb-4 p-4 rounded-lg 
                  {% if category == 'erro' %}
                    bg-red-100 text-red-800 border border-red-300
                  {% else %}
                    bg-blue-100 text-blue-800 border border-blue-300
                  {% endif %}">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}
      <select id="fisioterapeuta" name="fisioterapeuta" required
              class="w-full rounded-lg border border-gray-300 p-3 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-400">
        <option value="" disabled selected>-- Escolha um profissional --</option>
        {% for fisioterapeuta in fisioterapeutas %}
          <option value="{{ fisioterapeuta.id }}">{{ fisioterapeuta.nome }}</option>
        {% endfor %}
      </select>
    </div>

    <div>
      <label for="data-agendamento" class="block text-gray-700 font-semibold mb-1">Selecione a data:</label>
      <input type="date" id="data-agendamento" name="data-agendamento" min="2025-06-10" max="2025-12-31" required
             class="w-full rounded-lg border border-gray-300 p-3 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-400">
    </div>

    <div>
      <label for="horario" class="block text-gray-700 font-semibold mb-1">Selecione o horÃ¡rio:</label>
      <select id="horario" name="horario" required
        class="w-full rounded-lg border border-gray-300 p-3 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-400">
      <option value="" disabled selected>-- Escolha um horÃ¡rio --</option>
      <option value="08:00">08:00</option>
      <option value="09:00">09:00</option>
      <option value="10:00">10:00</option>
      <option value="11:00">11:00</option>
      <option value="13:00">13:00</option>
      <option value="14:00">14:00</option>
      <option value="15:00">15:00</option>
      <option value="16:00">16:00</option>
      </select>
    </div>

    <button type="submit"
            class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 rounded-lg transition-all duration-300">
      Agendar
    </button>

    <p class="text-center text-sm text-gray-600">
      JÃ¡ tem um agendamento?
      <a href="{{ url_for('meus_agendamentos_paciente') }}" class="text-blue-500 hover:underline font-medium">
        Ver meus agendamentos
      </a>
    </p>

  </form>
</div>
{% endblock %}
