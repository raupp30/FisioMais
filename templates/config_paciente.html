{% extends 'painel_paciente.html' %}
{% block title %}Configurações | Paciente{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto mt-10 bg-white shadow-lg rounded-xl p-8 border border-gray-100">
  <h2 class="text-3xl font-extrabold text-center text-gray-800 mb-8">⚙️ Meus Dados</h2>

  <form method="POST" class="space-y-6">
    <!-- Nome -->
    <div>
      <label for="nome" class="block text-sm font-medium text-gray-600 mb-1">Nome completo</label>
      <input type="text" id="nome" name="nome" maxlength="50" value="{{ dados.nome }}" required
        class="w-full border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:ring-2 focus:ring-green-400 focus:outline-none shadow-sm transition">
    </div>

    <!-- Email -->
    <div>
      <label for="email" class="block text-sm font-medium text-gray-600 mb-1">E-mail</label>
      <input type="email" id="email" name="email" maxlength="40" value="{{ dados.email }}" required
        class="w-full border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:ring-2 focus:ring-green-400 focus:outline-none shadow-sm transition">
    </div>

    <!-- CPF -->
    <div>
      <label for="cpf" class="block text-sm font-medium text-gray-600 mb-1">CPF</label>
      <input type="text" id="cpf" name="cpf" value="{{ dados.cpf }}" readonly
        class="w-full bg-gray-100 border border-gray-300 rounded-lg px-4 py-2 text-gray-500 cursor-not-allowed">
    </div>

    <!-- Data de nascimento -->
    <div>
      <label for="data_nasc" class="block text-sm font-medium text-gray-600 mb-1">Data de nascimento</label>
      <input type="date" id="data_nasc" name="data_nasc" value="{{ dados.data_nasc }}" readonly
        class="w-full bg-gray-100 border border-gray-300 rounded-lg px-4 py-2 text-gray-500 cursor-not-allowed">
    </div>

    <!-- Telefone -->
    <div>
      <label for="telefone" class="block text-sm font-medium text-gray-600 mb-1">Telefone</label>
      <input type="text" id="telefone" name="telefone" maxlength="11" value="{{ dados.telefone }}" required
        class="w-full border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:ring-2 focus:ring-green-400 focus:outline-none shadow-sm transition">
    </div>

    <!-- Gênero -->
    <div>
      <label for="genero" class="block text-sm font-medium text-gray-600 mb-1">Gênero</label>
      <select id="genero" name="genero" required
        class="w-full border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:ring-2 focus:ring-green-400 focus:outline-none shadow-sm transition">
        <option value="Masculino" {% if dados.genero=='Masculino' %}selected{% endif %}>Masculino</option>
        <option value="Feminino" {% if dados.genero=='Feminino' %}selected{% endif %}>Feminino</option>
        <option value="Outro" {% if dados.genero=='Outro' %}selected{% endif %}>Outro</option>
      </select>
    </div>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="p-4 rounded-lg font-semibold border border-green-500 bg-green-300 text-white text-center space-y-1">
      {% for category, message in messages %}
      <p>🔔 {{ message }}</p>
      {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

    <!-- Botão -->
    <div class="pt-4">
      <button type="submit"
        class="w-full bg-green-500 hover:bg-green-400 text-white font-bold py-2 rounded-lg shadow-md transition-all duration-200">
        💾 Salvar Alterações
      </button>
    </div>
  </form>
</div>

{% endblock %}
